<ion-card class="group-card" role="region" aria-labelledby="group-select-title">
  <ion-card-content class="card-content">
    <p id="group-select-title" class="section-title">Choose a Group</p>

    <div class="select-row">
      <ion-item lines="none" class="select-item" [class.select-item--disabled]="loading || !groups.length"
        aria-disabled="{{ loading || !groups.length }}">

        <ion-select interface="popover" placeholder="Select a group" [value]="selectedGroupId"
          [disabled]="loading || !groups.length" (ionChange)="onSelectChange($event.detail.value)">

          @for (group of groups; track group.id) {
          <ion-select-option [value]="group.id">
            {{ group.label }}
          </ion-select-option>
          }

        </ion-select>
      </ion-item>

      @if (loading) {
      <div class="loading-state" aria-live="polite">
        <ion-spinner name="crescent" class="spinner"></ion-spinner>
      </div>
      }
    </div>

    <ion-button expand="block" class="confirm-button" color="warning" [disabled]="loading || !selectedGroupId"
      (click)="confirmSelection()" aria-label="Confirm group selection">
      Next
    </ion-button>
  </ion-card-content>
</ion-card>